//declarative pipeline

pipeline {
    agent any

    stages {
        stage("clone Git repo"){
            steps{
                git branch: 'master',
                url: 'https://github.com/Sree903012/demo3.git'
                sh "ls -lat"
            }
            
        }

            stage("Build stage") {
                steps {
                            echo "This is a Build stage, here we use MVN clean package"
                            sh "mvn clean package"
                    }
            }

        stage("Upload artifacts to s3") {
            steps {
                echo "Upload artifacts in S3"
                sh "aws s3 cp target/*.war s3://sree9030/$JOB_NAME/$BUILD_NUMBER/" 
            }


        }

        stage("Deploy Tomcat server"){
            steps {
                echo "Deploy in tomcat server"
            }
        }
    }

}

